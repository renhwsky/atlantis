---
layout: post
title:  存储基础知识-持续更新
date: 2019-05-25
categories: 分布式文件系统 存储
tags: 文件系统
excerpt: 存储基础知识-持续更新
---

## NVDIMM
------
NVDIMM（non-volatile dual in-line memory module）即为非易失性内存，它是新一代新
型的内存规格，其集成了DRAM和非易失性存储芯片，能够在完全断电的情况下完整的保存内存数据，
下图为各存储介质的性能对比，可见虽然SSD比普通的HDD盘要快100倍，但基于DRAM的NVDIMM要比普通的HDD快100000，
另外SSD还有一个致命的缺点，就是有写入次数的限制，但NVDIMM没有此限制。

图片......???

**优点：** NVDIMM整合DRAM、Flash、智能系统控制器和电源模块来实现超级内存系统，其超级内存，既具有DRAM的低延    
&emsp;&emsp;&emsp;时和无次数限制特性，又获得了Flash的数据长期保存特性，超级电容的减少设计的复杂度和用料成     
&emsp;&emsp;&emsp;本，另外DIMM为业界服务器和存储服务器标准插槽,无需定制开发硬件接口      
**缺点：** 技术成熟度不够，另外一个是价格比较贵      

**疑问：**     
（1） 为什么FusionStorage的硬件中有8GNVDIMM内存（比较前沿）？    
（2） FusionStorage中块存储可以没有NVDIMM存储，但文件和对象的业务都上了NVDIMM存储？    


## 快照技术
------

传统的为保护数据的安全，会定期对数据进行复制、备份和恢复，但这些操作在一定程度上会影响当前正常的业务性能，因此一般会
使用增全量备份技术和在业务非繁忙来部分规避此问题。对于24 * 7不间断中断业务场景，则使用以上的方式还是有问题，我们需要一种不影响当前业务的备份技术，即备份时间窗口需要缩短接近为0，Snapshot快照和CDP持续数据保护技术则为此应用而产生。      

快照的优势是可以在数秒内完成，它定义为指定数据集的一个完全可用拷贝，该拷贝包含了相应数据在某个时间点上的镜像，快照有   
以下两种类型：     
（1）全量快照       
     镜像分离（Split Mirror）     
（2）增量快照       
     写时拷贝（Copy-On-Write）  COW     
     写时重定向（Redirect-On-Write） ROW     

### 全量快照

全量快照基于镜像分离快照技术实现，其原理为在快照进行之前会维护一套完整的镜像卷，在快照完成之前，会同时写入源卷和镜像
卷，当到达快照预定完成时间后，镜像卷会阻止写入操作，并快速脱离镜像卷为转为快照卷，这样就获得当前时间点的快照卷信息，快照卷在完成数据复制和备份后，将同步原卷数据，生成新的镜像卷，为下次使用全量快照做准备。    
优缺点：       
优点： 镜像卷的存在，实现数据安全和离线数据访问，断开镜像卷的时间非常短，因此备份窗口非常小           
缺点： 缺乏灵活性，不能在任意时刻进行快照，镜像卷的存在会导致双写，导致性能下降   


### COW

### ROW


